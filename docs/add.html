<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adding to The Project | mug Documentation</title>
    <meta name="description" content="Documentation for mug which lets you create AWS Lambda for golang projects.">
    
    
    <link rel="preload" href="/mug/assets/css/0.styles.e768ff45.css" as="style"><link rel="preload" href="/mug/assets/js/app.2b8e2b93.js" as="script"><link rel="preload" href="/mug/assets/js/2.c9bb0ce1.js" as="script"><link rel="preload" href="/mug/assets/js/6.df2d9ca5.js" as="script"><link rel="prefetch" href="/mug/assets/js/10.edf33365.js"><link rel="prefetch" href="/mug/assets/js/11.2283a773.js"><link rel="prefetch" href="/mug/assets/js/12.d474e4bb.js"><link rel="prefetch" href="/mug/assets/js/13.1841ff09.js"><link rel="prefetch" href="/mug/assets/js/14.79e79ec5.js"><link rel="prefetch" href="/mug/assets/js/15.271d7ecd.js"><link rel="prefetch" href="/mug/assets/js/16.48d2d4b0.js"><link rel="prefetch" href="/mug/assets/js/17.737b7002.js"><link rel="prefetch" href="/mug/assets/js/3.db4568d5.js"><link rel="prefetch" href="/mug/assets/js/4.b4b8287d.js"><link rel="prefetch" href="/mug/assets/js/5.56f20225.js"><link rel="prefetch" href="/mug/assets/js/7.9389fad9.js"><link rel="prefetch" href="/mug/assets/js/8.a3c17b3b.js"><link rel="prefetch" href="/mug/assets/js/9.881780b0.js">
    <link rel="stylesheet" href="/mug/assets/css/0.styles.e768ff45.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mug/" class="home-link router-link-active"><!----> <span class="site-name">mug Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mug/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/mug/commands/" class="nav-link">Commands Reference</a></div> <a href="https://github.com/crolly/mug" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mug/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/mug/commands/" class="nav-link">Commands Reference</a></div> <a href="https://github.com/crolly/mug" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/mug/" class="sidebar-link">Introduction</a></li><li><a href="/mug/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/mug/add.html" class="active sidebar-link">Adding to The Project</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mug/add.html#adding-a-simple-resource" class="sidebar-link">Adding a Simple Resource</a></li><li class="sidebar-sub-header"><a href="/mug/add.html#complex-resource-definition-with-nested-objects" class="sidebar-link">Complex Resource Definition with Nested Objects</a></li><li class="sidebar-sub-header"><a href="/mug/add.html#adding-function-groups-functions-etc" class="sidebar-link">Adding Function Groups, Functions etc.</a></li></ul></li><li><a href="/mug/debug.html" class="sidebar-link">Debug your Code</a></li><li><a href="/mug/deploy.html" class="sidebar-link">Deployment</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="adding-to-the-project"><a href="#adding-to-the-project" aria-hidden="true" class="header-anchor">#</a> Adding to The Project</h1> <p>The <code>add</code> command lets you define a new <strong>resource</strong> or <strong>function group</strong>.</p> <h2 id="adding-a-simple-resource"><a href="#adding-a-simple-resource" aria-hidden="true" class="header-anchor">#</a> Adding a Simple Resource</h2> <p>The CRUDL functions will be generated in the <code>functions/resourcename/</code> folder and the <code>serverless.yml</code> will be updated accordingly.</p> <p>For example, let's create a course resource, which has a couple of simple attributes. <code>cd</code> into the project directory and run:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mug add resource course -a &quot;name,subtitle,description&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This will generate the following files/ subdirectories in the folder <code>functions/course/</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-rw-r--r-- course.json
-rw-r--r-- course.go
-rw-r--r-- serverless.yml
-rw-r--r-- create/main.go
-rw-r--r-- delete/main.go
-rw-r--r-- list/main.go
-rw-r--r-- read/main.go
-rw-r--r-- update/main.go
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>The resource definition is kept track of in the <code>course.json</code> like this. I use this as a development step to eventually enable definition through <code>json</code> input:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;course&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Course&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ident&quot;</span><span class="token operator">:</span> <span class="token string">&quot;course&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ident&quot;</span><span class="token operator">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;goType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;awsType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ident&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;goType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;awsType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;subtitle&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ident&quot;</span><span class="token operator">:</span> <span class="token string">&quot;subtitle&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;goType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;awsType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;ident&quot;</span><span class="token operator">:</span> <span class="token string">&quot;description&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;goType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;awsType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;hash&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;nested&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
  <span class="token property">&quot;imports&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;github.com/gofrs/uuid&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>The course's struct in the <code>course.go</code> looks like this:</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// Course defines the Course model</span>
<span class="token keyword">type</span> Course <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ID          <span class="token builtin">string</span> <span class="token string">`json:&quot;id&quot;`</span>
	Name        <span class="token builtin">string</span> <span class="token string">`json:&quot;name&quot;`</span>
	Subtitle    <span class="token builtin">string</span> <span class="token string">`json:&quot;subtitle&quot;`</span>
	Description <span class="token builtin">string</span> <span class="token string">`json:&quot;description&quot;`</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="identifying-attribute"><a href="#identifying-attribute" aria-hidden="true" class="header-anchor">#</a> Identifying Attribute</h3> <p>As you can see an <code>ID</code> attribute of type <code>string</code> is automatically added. This <code>ID</code> will also be used as the hash key for the table.</p> <p>It is important to note, that DynamoDB is not best friends with <strong>UUID</strong> types. The marshall/ unmarshall process is still a little buggy, so at this point it is safer to just store <strong>UUIDs</strong> as strings and marshall/ unmarshall them in the functions code, instead of letting DynamoDB do that work.</p> <p>If wish to define your own identifying attribute, you can do so by specifying the required flags of the command. For details see the <a href="/mug/commands/">Commands Reference</a>.</p> <h3 id="general-attributes"><a href="#general-attributes" aria-hidden="true" class="header-anchor">#</a> General Attributes</h3> <p>The type for an attribute is by default <code>string</code> if none is provided. E.g., if you would like to add a number just provide the golang type with the attribute's name separated by a colon (😃 like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mug add resource course -a &quot;name,subtitle,description,price:float32&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The <code>course.go</code> file will also contain all the wrapper methods to interact with the database, just in case you want to have another solution as DynamoDB as persistence layer. The <code>main.go</code> files in the function subdirectories will contain the actual lambda functionality.</p> <h2 id="complex-resource-definition-with-nested-objects"><a href="#complex-resource-definition-with-nested-objects" aria-hidden="true" class="header-anchor">#</a> Complex Resource Definition with Nested Objects</h2> <p>With Dynamo DB being a NoSQL database you certainly cannot use relationships like you may be used to from relational databases like MySQL or PostgreSQL. Usually you overcome this by deciding which entities you work with (querying, writing, etc.) and embedding all related information.</p> <p>With mug you can easily generate such resources with a little more complex attribute definition to the <code>-a</code> attributes flag:</p> <ul><li><code>{}</code> wraps nested objects (<code>1-1</code> relationship)</li> <li><code>[]</code> wraps slices of objects (<code>1-n</code> relationship).</li></ul> <p>For example, let's generate a user, who has an address and may have multiple enrollments to courses: <strong>Please make sure to wrap the attribute definition with <code>&quot;</code>(double quotes) to ensure the recursive parsing works!</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mug add resource user -a &quot;name,isActive:bool,email,
address:{street,zip,city},
enrollments:[courseID,startDate:time.Time,endDate:time.Time]&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>The generated go struct(s) will look like this:</p> <div class="language-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// User defines the User model</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ID       <span class="token builtin">string</span> <span class="token string">`json:&quot;id&quot;`</span>
	Name     <span class="token builtin">string</span> <span class="token string">`json:&quot;name&quot;`</span>
	IsActive <span class="token builtin">bool</span>   <span class="token string">`json:&quot;is_active&quot;`</span>
	Email    <span class="token builtin">string</span> <span class="token string">`json:&quot;email&quot;`</span>

	Address     Address       <span class="token string">`json:&quot;address&quot;`</span>
	Enrollments <span class="token punctuation">[</span><span class="token punctuation">]</span>Enrollment  <span class="token string">`json:&quot;enrollments&quot;`</span>
<span class="token punctuation">}</span>

<span class="token comment">// Address defines the Address model</span>
<span class="token keyword">type</span> Address <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Street <span class="token builtin">string</span> <span class="token string">`json:&quot;street&quot;`</span>
	Zip    <span class="token builtin">string</span> <span class="token string">`json:&quot;zip&quot;`</span>
	City   <span class="token builtin">string</span> <span class="token string">`json:&quot;city&quot;`</span>
<span class="token punctuation">}</span>

<span class="token comment">// Enrollment defines the Enrollments model</span>
<span class="token keyword">type</span> Enrollment <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	CourseID  <span class="token builtin">string</span>    <span class="token string">`json:&quot;course_id&quot;`</span>
	StartDate time<span class="token punctuation">.</span>Time <span class="token string">`json:&quot;start_date&quot;`</span>
	EndDate   time<span class="token punctuation">.</span>Time <span class="token string">`json:&quot;end_date&quot;`</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>Of course, you can also reference the <code>ID</code> in an object, however, you will have to manage this in your own code - getting the <code>ID</code> or multiple <code>IDs</code> for <code>m-n</code> relationships and fetching the referenced objects afterwards.</p> <h2 id="adding-function-groups-functions-etc"><a href="#adding-function-groups-functions-etc" aria-hidden="true" class="header-anchor">#</a> Adding Function Groups, Functions etc.</h2> <p>Adding function groups or functions is very similar. You can also remove resources, function groups or functions from the previous.</p> <p><strong>Have a look at the appropriate command syntax in the <a href="/mug/commands/">Commands Reference</a>.</strong></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/crolly/mug/edit/master/docs-src/add.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/mug/getting-started.html" class="prev">
          Getting Started
        </a></span> <span class="next"><a href="/mug/debug.html">
          Debug your Code
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/mug/assets/js/app.2b8e2b93.js" defer></script><script src="/mug/assets/js/2.c9bb0ce1.js" defer></script><script src="/mug/assets/js/6.df2d9ca5.js" defer></script>
  </body>
</html>
